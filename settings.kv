#:kivy 2.0
#:import isdir os.path.isdir
#:set fish 'images/fish.png'

<SettingScreen>:
    BoxLayout:
        orientation:"vertical"
        pos: 0, 550
        ActionBar:
            ActionView:
                use_separator: True
                ActionPrevious:
                    app_icon: fish
                    title: 'User Settings'
                    with_previous: False
                ActionButton:
                    text: 'User Settings'
                    on_release: root.manager.current = 'settings'  
                ActionButton:
                    text: 'Sensor Settings'
                    on_release: root.manager.current = 'settings_sensors'            

    Label:
        id: username
        text: 'Username: '
        text_size:self.size
        halign: "left"
        valign: "middle"
        size_hint: None, None
        size: 100, 30
        pos: 10, 500
    TextInput:
        id: username_input
        size_hint: None, None
        size: 250, 30
        pos: 150, 500
    Widget:
        size_hint: .6,.6
        canvas:
            Color:
                rgba: 1, 1, 1, 0.5
            Line:
                rectangle: 5,335, 400, 150
    Label:
        id: email_settings
        text: 'Email Settings'
        text_size:self.size
        halign: "left"
        valign: "middle"
        size_hint: None, None
        size: 100, 30
        pos: 160, 455   
    
    
    Label:
        id: email
        text: 'Email: '
        text_size:self.size
        halign: "left"
        valign: "middle"
        size_hint: None, None
        size: 100, 30
        pos: 10, 420
    TextInput:
        id: email_input
        size_hint: None, None
        size: 250, 30
        pos: 150, 420
    Label:
        id: password
        text: 'Password: '
        text_size:self.size
        halign: "left"
        valign: "middle"
        size_hint: None, None
        size: 100, 30
        pos: 10, 380
    TextInput:
        id: password_input
        password: True
        size_hint: None, None
        size: 250, 30
        pos: 150, 380
    Label:
        id: lab
        text: "Email Alert"
        text_size:self.size
        color: 1, 1, 1, 1
        halign: "left"
        valign: "middle"
        size_hint: None, None
        size: 100, 30
        pos: 10, 340
    CheckBox:
        id: email_alert
        pos: -350, 57

    Button:
        text: 'Save'
        size_hint: None, None
        size: 100, 50
        pos: 804, 10
        on_press: 
            root.save_settings()
            root.update_settings()
            app.root.get_screen('menu').on_start()

    Button:
        text: 'Back to menu'
        size_hint: None, None
        size: 100, 50
        pos: 914, 10
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'menu'